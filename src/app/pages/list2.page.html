<!-- Menu component'i çağırıyoruz -->
<app-menu></app-menu>

<!-- Ana içerik ion-router-outlet ile sarılmalı -->
<ion-router-outlet id="main-content">
  <ion-header>
    <ion-toolbar>
      <!-- Menu button sol tarafta ekleniyor -->
      <ion-buttons slot="start">
        <ion-menu-button menu="main-menu"></ion-menu-button>
      </ion-buttons>

      <ion-buttons slot="end">
        <ion-button fill="outline" (click)="logout()" *ngIf="isLoggedIn$ | async">{{'LIST2.LOGOUT' | translate}}</ion-button>
        <ion-button fill="outline" (click)="login()" *ngIf="!(isLoggedIn$ | async)">{{'LIST.LOGIN' | translate}}</ion-button>
      </ion-buttons>
      
      <ion-segment [(ngModel)]="category">
        <ion-segment-button *ngFor="let segment of segments" [value]="segment.value">
          <ion-label>{{ segment.label }}</ion-label>
        </ion-segment-button>
      </ion-segment>

    </ion-toolbar>
  </ion-header>

  <ion-content>
    <div class="content-container">
      <div class="articles-wrapper" *ngIf="filteredArticles.length > 0">

          <ion-card 
            class="article-card" 
            *ngFor="let article of filteredArticles">


            <div class="card-image">
              <img [src]="article.image" alt="{{article.title}}" />
            </div>
            
            <div (click)="goToArticle(article.id)" style="cursor: pointer;">
              <ion-card-header>
                <ion-card-title>{{ article.title }}</ion-card-title>
                <ion-card-subtitle>{{ article.subtitle }}</ion-card-subtitle>
              </ion-card-header>

              
            <div class="card-menu" *ngIf="category === 'yazilarim' && isUserArticle(article)">
    <button class="menu-button" (click)="openMenu($event, article)">
      <ion-icon name="ellipsis-vertical"></ion-icon>
    </button>
  </div>


              <ion-card-content>
                <div class="author-section">
                  <ion-avatar class="author-avatar">
                    <img [src]="article.userPhoto" alt="{{article.userName}}">
                  </ion-avatar>
                  <div class="author-info">
                    <span class="author-name">{{ article.userName }}</span>
                    <span class="publish-date">{{ article.date | date:'short' }}</span>
                  </div>
                </div>
                
                <p class="article-preview">{{ article.content | slice:0:80 }}...</p>
                
                <div class="article-stats">
                  <div class="likes">
                    <ion-icon name="heart"></ion-icon>
                    <span>{{ article.likes }}</span>
                  </div>
                </div>
              </ion-card-content>
            </div>
          </ion-card>
      </div>
    
    
    <!-- Makale henüz yoksa gösterilecek mesaj -->
    <div *ngIf="filteredArticles.length === 0" class="no-articles">
      <ion-icon name="document-outline" class="no-articles-icon"></ion-icon>
      <p>{{'LIST2.NO_ARTICLE2' | translate}}</p>
      <ion-button (click)="goToAdd()" color="primary">{{'LIST2.FIRST_ARTICLE2' | translate}}</ion-button>
    </div>
    </div>

    <!-- Floating Action Button -->
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button (click)="goToAdd()">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </ion-content>
</ion-router-outlet>